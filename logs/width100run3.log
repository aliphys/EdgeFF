MNIST_One_Pass
layers (hidden depth): 3
[784, 100, 100, 100]
Configuration:
  Selected classes: None
  Filter by layer: None
  Target layer: 2
  Correct only: False
  Run specialization: True
  Run energy analysis: True
  Compare energy methods: False
  Goodness threshold: 2.0
  Confidence threshold multiplier: 1.0
  Train: False (from --train False)
Moving model to CPU for inference...
Moving data to CPU for inference...
‚úì Model and data moved to CPU for inference

Results for the [1mTRAIN[0m set: 
	F1-score:  0.944222193260102
	Accuracy:  0.9446666666666667
	Error: 0.05533331632614136

Results for the [1mTEST[0m set: 
	F1-score:  0.9384604364047148
	Accuracy:  0.939
	Error: 0.06099998950958252

Results for the [1mVALIDATION[0m set: 
	F1-score:  0.941674566518731
	Accuracy:  0.9424
	Error: 0.05760002136230469
Averaged mean:  6.641227281183506
Averaged std:  2.125202198921235
Averaged mean_all_incorrect_labels:  -6.672633769978096
Averaged std_all_incorrect_labels:  3.481047418377192
Averaged mean:  7.385496672225538
Averaged std:  2.2562710654397184
Averaged mean_all_incorrect_labels:  -9.730503773047536
Averaged std_all_incorrect_labels:  4.846133671043886
Averaged mean:  11.395675211863903
Averaged std:  3.1143529031707162
Averaged mean_all_incorrect_labels:  -9.123657953981454
Averaged std_all_incorrect_labels:  5.422816105452679

Results for the [1mVALIDATION[0m set based on light inference: 
	F1-score:  0.9399678055804955
	Accuracy:  0.9405
	Error: 0.05949997901916504
mean number of layers used:  1.3991
percentage for layers_up_to  [1. 2. 3.]  :  [0.7445 0.1119 0.1436]

--- Fixed Layer Evaluation ---
Layer 0 only - Accuracy: 0.9434
Layer 1 only - Accuracy: 0.9421
Layer 2 only - Accuracy: 0.9390

--- Starting Layer Specialization Analysis ---

======================================================================
    LAYER PERFORMANCE DEGRADATION ANALYSIS
======================================================================

1. INDIVIDUAL LAYER PERFORMANCE:
----------------------------------------
   Layer 0 only: 0.9434 (94.3%)
   Layer 1 only: 0.9421 (94.2%)
   Layer 2 only: 0.9390 (93.9%)

   Performance differences:
   Layer 1 vs Layer 0: -0.0013 (-0.1%)
   Layer 2 vs Layer 1: -0.0031 (-0.3%)

2. LAYER REPRESENTATION ANALYSIS:
----------------------------------------

   Layer 0 (100 neurons):
     Activation mean:   0.3327
     Activation std:    0.8058
     Sparsity (% zeros):  78.4%
     Saturation (>5.0):    0.1%
     Value range:       7.0095
     Goodness mean:     0.7600
     Goodness std:      0.3456
     Goodness range:    1.9010

   Layer 1 (100 neurons):
     Activation mean:   0.2087
     Activation std:    1.4783
     Sparsity (% zeros):  90.9%
     Saturation (>5.0):    1.6%
     Value range:      20.9641
     Goodness mean:     2.2290
     Goodness std:      1.5018
     Goodness range:    5.9857

   Layer 2 (100 neurons):
     Activation mean:   0.5103
     Activation std:    1.4442
     Sparsity (% zeros):  84.3%
     Saturation (>5.0):    3.5%
     Value range:       9.2252
     Goodness mean:     2.3461
     Goodness std:      0.9917
     Goodness range:    4.0277

3. CLASS DISCRIMINATION ANALYSIS:
----------------------------------------

   Layer 0 class separation:
     Class 0: goodness = 0.9097
     Class 1: goodness = 0.7636
     Class 2: goodness = 0.6832
     Class 3: goodness = 0.7451
     Class 4: goodness = 0.6803
     Class 5: goodness = 0.8679
     Class 6: goodness = 0.8176
     Class 7: goodness = 0.7688
     Class 8: goodness = 0.8180
     Class 9: goodness = 0.6141
     Separation std:   0.0861
     Separation range: 0.2957

   Layer 1 class separation:
     Class 0: goodness = 2.2479
     Class 1: goodness = 4.0231
     Class 2: goodness = 1.2480
     Class 3: goodness = 1.7968
     Class 4: goodness = 1.8757
     Class 5: goodness = 1.8773
     Class 6: goodness = 2.1948
     Class 7: goodness = 2.5144
     Class 8: goodness = 1.5825
     Class 9: goodness = 2.2803
     Separation std:   0.7126
     Separation range: 2.7751

   Layer 2 class separation:
     Class 0: goodness = 2.3795
     Class 1: goodness = 3.6248
     Class 2: goodness = 1.7872
     Class 3: goodness = 1.7341
     Class 4: goodness = 2.6602
     Class 5: goodness = 2.0295
     Class 6: goodness = 2.1985
     Class 7: goodness = 2.4006
     Class 8: goodness = 1.9515
     Class 9: goodness = 2.1469
     Separation std:   0.5208
     Separation range: 1.8906

4. INFORMATION BOTTLENECK ANALYSIS:
----------------------------------------
   Input entropy: 4.0212
   Layer 0 entropy: 6.4619 (compression: 0.62x)
   Layer 1 entropy: 2.3103 (compression: 1.74x)
   Layer 2 entropy: 6.3055 (compression: 0.64x)

5. LEARNING EFFICIENCY ANALYSIS:
----------------------------------------
   Why deeper layers may not help in Forward-Forward:
   ‚Ä¢ Each layer learns independently (no gradient flow)
   ‚Ä¢ Information bottleneck: 784 ‚Üí 100 neurons
   ‚Ä¢ Goodness function may not scale well with depth
   ‚Ä¢ Local optima: each layer optimizes separately

6. OPTIMIZATION RECOMMENDATIONS:
----------------------------------------
   ‚ö†Ô∏è  High sparsity detected - consider wider layers

   Suggested improvements:
   1. Increase layer width: [784, 400, 300, 200] instead of [784, 100, 100, 100]
   2. Try alternative goodness functions (top-k, entropy-based)
   3. Consider skip connections or hierarchical training
   4. Experiment with different activation functions
   5. Use progressive layer training (freeze earlier layers)

======================================================================

--- Running Layer Specialization Analysis ---
Analyzing layer 0...
  Layer 0, Class 0: 0.9673
  Layer 0, Class 1: 0.9824
  Layer 0, Class 2: 0.9351
  Layer 0, Class 3: 0.9297
  Layer 0, Class 4: 0.9165
  Layer 0, Class 5: 0.9182
  Layer 0, Class 6: 0.9530
  Layer 0, Class 7: 0.9368
  Layer 0, Class 8: 0.9497
  Layer 0, Class 9: 0.9386
Analyzing layer 1...
  Layer 1, Class 0: 0.9694
  Layer 1, Class 1: 0.9850
  Layer 1, Class 2: 0.9273
  Layer 1, Class 3: 0.9366
  Layer 1, Class 4: 0.9379
  Layer 1, Class 5: 0.8957
  Layer 1, Class 6: 0.9499
  Layer 1, Class 7: 0.9144
  Layer 1, Class 8: 0.9610
  Layer 1, Class 9: 0.9356
Analyzing layer 2...
  Layer 2, Class 0: 0.9663
  Layer 2, Class 1: 0.9947
  Layer 2, Class 2: 0.9351
  Layer 2, Class 3: 0.9168
  Layer 2, Class 4: 0.9532
  Layer 2, Class 5: 0.9283
  Layer 2, Class 6: 0.9405
  Layer 2, Class 7: 0.9358
  Layer 2, Class 8: 0.9168
  Layer 2, Class 9: 0.8949
Layer specialization matrix saved to: /home/jetson/Documents/github/EdgeFF/output/layer_specialization_matrix_20251013_133012.png

--- Specialization Analysis Results ---
Specialization Matrix (Layer x Class):
[[0.96734694 0.98237885 0.93507752 0.92970297 0.91649695 0.91816143
  0.95302714 0.93677043 0.94969199 0.93855302]
 [0.96938776 0.98502203 0.92732558 0.93663366 0.93788187 0.89573991
  0.94989562 0.91439689 0.96098563 0.93557978]
 [0.96632653 0.99471366 0.93507752 0.91683168 0.95315682 0.92825112
  0.94050104 0.93579767 0.91683778 0.89494549]]

Best layer for each class:
Class 0: Layer 1 (accuracy: 0.9694)
Class 1: Layer 2 (accuracy: 0.9947)
Class 2: Layer 0 (accuracy: 0.9351)
Class 3: Layer 1 (accuracy: 0.9366)
Class 4: Layer 2 (accuracy: 0.9532)
Class 5: Layer 2 (accuracy: 0.9283)
Class 6: Layer 0 (accuracy: 0.9530)
Class 7: Layer 0 (accuracy: 0.9368)
Class 8: Layer 1 (accuracy: 0.9610)
Class 9: Layer 0 (accuracy: 0.9386)

Layer specialization scores (higher = more specialized):
Layer 0: 0.000391
Layer 1: 0.000622
Layer 2: 0.000711

--- Data Filtering Impact ---
Original data size: 10000
Filtered data size: 10000
Retention rate: 100.0%

==================================================
RUNNING ENERGY ANALYSIS
==================================================
Resetting model state...
Current multiplier: 1.0
Reset multiplier to: 1.0

======================================================================
STARTING CONFIDENCE MECHANISM DEBUGGING
======================================================================

=== Confidence Mechanism Debugging ===

Confidence Vector Statistics:
Layer 0: mean=6.641227, std=2.125202, std/mean ratio=0.320001
Layer 1: mean=7.385497, std=2.256271, std/mean ratio=0.305500
Layer 2: mean=11.395675, std=3.114353, std/mean ratio=0.273293

Threshold Analysis for Different Multipliers:
Multiplier | Layer 0 Threshold | Layer 1 Threshold | Layer 2 Threshold
---------------------------------------------------------------------------------
       3.0 |          0.265621 |          0.616683 |          2.052617

Actual Softmax Outputs Analysis (first 3 samples):

Sample 0 (true label: 7):
  Layer 0: max_softmax=0.999877, predicted_class=7
    Mult 0.1: threshold=6.428707, passes=False
    Mult 1.0: threshold=4.516025, passes=False
    Mult 2.0: threshold=2.390823, passes=False
    Mult 3.0: threshold=0.265621, passes=True
  Layer 1: max_softmax=0.999712, predicted_class=7
    Mult 0.1: threshold=7.159870, passes=False
    Mult 1.0: threshold=5.129226, passes=False
    Mult 2.0: threshold=2.872955, passes=False
    Mult 3.0: threshold=0.616683, passes=True
  Layer 2: max_softmax=0.999988, predicted_class=7
    Mult 0.1: threshold=11.084240, passes=False
    Mult 1.0: threshold=8.281322, passes=False
    Mult 2.0: threshold=5.166969, passes=False
    Mult 3.0: threshold=2.052617, passes=False

Sample 1 (true label: 2):
  Layer 0: max_softmax=0.996046, predicted_class=2
    Mult 0.1: threshold=6.428707, passes=False
    Mult 1.0: threshold=4.516025, passes=False
    Mult 2.0: threshold=2.390823, passes=False
    Mult 3.0: threshold=0.265621, passes=True
  Layer 1: max_softmax=0.999229, predicted_class=2
    Mult 0.1: threshold=7.159870, passes=False
    Mult 1.0: threshold=5.129226, passes=False
    Mult 2.0: threshold=2.872955, passes=False
    Mult 3.0: threshold=0.616683, passes=True
  Layer 2: max_softmax=0.999746, predicted_class=2
    Mult 0.1: threshold=11.084240, passes=False
    Mult 1.0: threshold=8.281322, passes=False
    Mult 2.0: threshold=5.166969, passes=False
    Mult 3.0: threshold=2.052617, passes=False

Sample 2 (true label: 1):
  Layer 0: max_softmax=0.998784, predicted_class=1
    Mult 0.1: threshold=6.428707, passes=False
    Mult 1.0: threshold=4.516025, passes=False
    Mult 2.0: threshold=2.390823, passes=False
    Mult 3.0: threshold=0.265621, passes=True
  Layer 1: max_softmax=0.999899, predicted_class=1
    Mult 0.1: threshold=7.159870, passes=False
    Mult 1.0: threshold=5.129226, passes=False
    Mult 2.0: threshold=2.872955, passes=False
    Mult 3.0: threshold=0.616683, passes=True
  Layer 2: max_softmax=0.999997, predicted_class=1
    Mult 0.1: threshold=11.084240, passes=False
    Mult 1.0: threshold=8.281322, passes=False
    Mult 2.0: threshold=5.166969, passes=False
    Mult 3.0: threshold=2.052617, passes=False
======================================================================
DEBUGGING COMPLETE - STARTING ENERGY ANALYSIS
======================================================================

--- Choosing Energy Analysis Method ---
Dataset size: 10000 samples
Analysis subset: 10000 samples (FULL TEST SET)
‚úÖ Using TWO-PHASE ENERGY ANALYSIS (recommended for larger datasets)
   Phase 1: Fast exit pattern detection
   Phase 2: Batch energy measurement by exit layer

======================================================================
TWO-PHASE ENERGY ANALYSIS WITH EXIT PATTERN DETECTION
======================================================================

=== Phase 1: Detecting Sample Exit Patterns (Fast) ===
Analyzing exit patterns for 10000 samples...
  Processing sample 0/10000 (0.0%)
  Processing sample 500/10000 (5.0%)
  Processing sample 1000/10000 (10.0%)
  Processing sample 1500/10000 (15.0%)
  Processing sample 2000/10000 (20.0%)
  Processing sample 2500/10000 (25.0%)
  Processing sample 3000/10000 (30.0%)
  Processing sample 3500/10000 (35.0%)
  Processing sample 4000/10000 (40.0%)
  Processing sample 4500/10000 (45.0%)
  Processing sample 5000/10000 (50.0%)
  Processing sample 5500/10000 (55.0%)
  Processing sample 6000/10000 (60.0%)
  Processing sample 6500/10000 (65.0%)
  Processing sample 7000/10000 (70.0%)
  Processing sample 7500/10000 (75.0%)
  Processing sample 8000/10000 (80.0%)
  Processing sample 8500/10000 (85.0%)
  Processing sample 9000/10000 (90.0%)
  Processing sample 9500/10000 (95.0%)

=== Exit Pattern Detection Results ===
  Layer 1: 0 samples (0.0%)
  Layer 2: 0 samples (0.0%)
  Layer 3: 10000 samples (100.0%)

=== Accuracy by Exit Layer ===
  Layer 3: 0.9390 (9390/10000)

=== Phase 2: Batch Energy Measurement by Exit Layer ===

Skipping Layer 1: No samples exit at this layer

Skipping Layer 2: No samples exit at this layer

--- Measuring Layer 3 Energy (batch of 10000 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 29: samples 2800-2899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 30: samples 2900-2999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 31: samples 3000-3099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 32: samples 3100-3199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 33: samples 3200-3299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 34: samples 3300-3399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 35: samples 3400-3499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 36: samples 3500-3599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 37: samples 3600-3699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 38: samples 3700-3799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 39: samples 3800-3899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 40: samples 3900-3999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 41: samples 4000-4099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 42: samples 4100-4199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 43: samples 4200-4299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 44: samples 4300-4399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 45: samples 4400-4499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 46: samples 4500-4599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 47: samples 4600-4699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 48: samples 4700-4799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 49: samples 4800-4899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 50: samples 4900-4999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 51: samples 5000-5099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 52: samples 5100-5199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 53: samples 5200-5299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 54: samples 5300-5399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 55: samples 5400-5499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 56: samples 5500-5599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 57: samples 5600-5699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 58: samples 5700-5799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 59: samples 5800-5899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 60: samples 5900-5999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 61: samples 6000-6099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 62: samples 6100-6199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 63: samples 6200-6299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 64: samples 6300-6399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 65: samples 6400-6499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 66: samples 6500-6599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 67: samples 6600-6699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 68: samples 6700-6799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 69: samples 6800-6899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 70: samples 6900-6999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 71: samples 7000-7099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 72: samples 7100-7199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 73: samples 7200-7299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 74: samples 7300-7399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 75: samples 7400-7499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 76: samples 7500-7599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 77: samples 7600-7699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 78: samples 7700-7799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 79: samples 7800-7899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 80: samples 7900-7999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 81: samples 8000-8099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 82: samples 8100-8199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 83: samples 8200-8299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 84: samples 8300-8399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 85: samples 8400-8499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 86: samples 8500-8599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 87: samples 8600-8699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 88: samples 8700-8799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 89: samples 8800-8899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 90: samples 8900-8999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 91: samples 9000-9099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 92: samples 9100-9199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 93: samples 9200-9299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 94: samples 9300-9399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 95: samples 9400-9499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 96: samples 9500-9599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 97: samples 9600-9699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 98: samples 9700-9799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 99: samples 9800-9899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 100: samples 9900-9999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Results for Layer 3:
      Total samples: 10000
      Total energy: 160.183750 J (160183.750 mJ)
      Per-sample energy: 0.016018 J (16.018 mJ)
      Average power: 6.407 W
      Total duration: 11.301 s

======================================================================
TWO-PHASE ENERGY ANALYSIS RESULTS
======================================================================

=== Overall Energy Statistics ===
Total samples analyzed: 10000
Total energy consumed: 160.183750 J (160183.750 mJ)
Average energy per sample: 0.016018 J (16.018 mJ)

=== Energy Breakdown by Exit Layer ===
Layer | Samples | Accuracy | Per-Sample (mJ) | Total (mJ) | Avg Power (W) | CPU+GPU (W) | SOC (W) | Cum Acc | Cum Energy (mJ) | Cum Time (ms)
---------------------------------------------------------------------------------------------------------------------------------------
    1 |       0 |   0.0000 |         0.000 |     0.000 |        0.000 |      0.000 |   0.000 |  0.0000 |         0.000 |       0.000
    2 |       0 |   0.0000 |         0.000 |     0.000 |        0.000 |      0.000 |   0.000 |  0.0000 |         0.000 |       0.000
    3 |   10000 |   0.9390 |        16.018 | 160183.750 |        6.407 |      1.567 |   2.377 |  0.9390 |        16.018 |       1.130

--- Baseline Energy Analysis (multiplier = 1.0) ---
=== Energy Consumption Analysis ===
Energy Consumption Results (10000 samples):
Average energy per sample: 16.018 mJ (0.016018 J)
Energy standard deviation: 0.000 mJ (0.000000 J)
Energy range: 16.018 - 16.018 mJ

Exit Layer Distribution:
Layer 1: 0 samples (0.0%)
Layer 2: 0 samples (0.0%)
Layer 3: 10000 samples (100.0%)

Per-Layer Energy Breakdown:
Layer | Samples | Per-Sample (mJ) | Total (mJ) | Avg Power (W) | CPU+GPU (W) | SOC (W)
-------------------------------------------------------------------------------------
    3 |   10000 |        16.018 | 160183.750 |        6.407 |      1.567 |   2.377
--- Threshold Comparison Analysis ---

=== Energy vs Accuracy Trade-off Analysis ===
Multiplier | Avg Energy (mJ) | Accuracy | Energy/Accuracy Ratio
-----------------------------------------------------------------

--- Converting to Probability Space for Proper Comparison ---
Layer 0: logit(6.641, 2.125) ‚Üí prob(0.998696, 0.021252)
Layer 1: logit(7.385, 2.256) ‚Üí prob(0.999380, 0.022563)
Layer 2: logit(11.396, 3.114) ‚Üí prob(0.999989, 0.031144)

Testing with Corrected Probability-Space Thresholds:
Multiplier | Layer 0 Thresh | Layer 1 Thresh | Layer 2 Thresh | Avg Energy | Accuracy
------------------------------------------------------------------------------------

--- Processing multiplier 0.1 ---
  Running two-phase energy analysis for multiplier 0.1...

======================================================================
TWO-PHASE ENERGY ANALYSIS WITH EXIT PATTERN DETECTION
======================================================================

=== Phase 1: Detecting Sample Exit Patterns (Fast) ===
Analyzing exit patterns for 10000 samples...
  Processing sample 0/10000 (0.0%)
  Processing sample 500/10000 (5.0%)
  Processing sample 1000/10000 (10.0%)
  Processing sample 1500/10000 (15.0%)
  Processing sample 2000/10000 (20.0%)
  Processing sample 2500/10000 (25.0%)
  Processing sample 3000/10000 (30.0%)
  Processing sample 3500/10000 (35.0%)
  Processing sample 4000/10000 (40.0%)
  Processing sample 4500/10000 (45.0%)
  Processing sample 5000/10000 (50.0%)
  Processing sample 5500/10000 (55.0%)
  Processing sample 6000/10000 (60.0%)
  Processing sample 6500/10000 (65.0%)
  Processing sample 7000/10000 (70.0%)
  Processing sample 7500/10000 (75.0%)
  Processing sample 8000/10000 (80.0%)
  Processing sample 8500/10000 (85.0%)
  Processing sample 9000/10000 (90.0%)
  Processing sample 9500/10000 (95.0%)

=== Exit Pattern Detection Results ===
  Layer 1: 6516 samples (65.2%)
  Layer 2: 544 samples (5.4%)
  Layer 3: 2940 samples (29.4%)

=== Accuracy by Exit Layer ===
  Layer 1: 0.9954 (6486/6516)
  Layer 2: 0.9761 (531/544)
  Layer 3: 0.8078 (2375/2940)

=== Phase 2: Batch Energy Measurement by Exit Layer ===

--- Measuring Layer 1 Energy (batch of 6516 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 29: samples 2800-2899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 30: samples 2900-2999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 31: samples 3000-3099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 32: samples 3100-3199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 33: samples 3200-3299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 34: samples 3300-3399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 35: samples 3400-3499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 36: samples 3500-3599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 37: samples 3600-3699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 38: samples 3700-3799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 39: samples 3800-3899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 40: samples 3900-3999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 41: samples 4000-4099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 42: samples 4100-4199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 43: samples 4200-4299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 44: samples 4300-4399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 45: samples 4400-4499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 46: samples 4500-4599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 47: samples 4600-4699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 48: samples 4700-4799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 49: samples 4800-4899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 50: samples 4900-4999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 51: samples 5000-5099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 52: samples 5100-5199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 53: samples 5200-5299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 54: samples 5300-5399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 55: samples 5400-5499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 56: samples 5500-5599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 57: samples 5600-5699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 58: samples 5700-5799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 59: samples 5800-5899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 60: samples 5900-5999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 61: samples 6000-6099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 62: samples 6100-6199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 63: samples 6200-6299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 64: samples 6300-6399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 65: samples 6400-6499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 66: samples 6500-6515
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Results for Layer 1:
      Total samples: 6516
      Total energy: 106.746500 J (106746.500 mJ)
      Per-sample energy: 0.016382 J (16.382 mJ)
      Average power: 6.469 W
      Total duration: 4.187 s

--- Measuring Layer 2 Energy (batch of 544 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-543
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Results for Layer 2:
      Total samples: 544
      Total energy: 9.730500 J (9730.500 mJ)
      Per-sample energy: 0.017887 J (17.887 mJ)
      Average power: 6.489 W
      Total duration: 0.486 s

--- Measuring Layer 3 Energy (batch of 2940 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 29: samples 2800-2899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 30: samples 2900-2939
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Results for Layer 3:
      Total samples: 2940
      Total energy: 48.882500 J (48882.500 mJ)
      Per-sample energy: 0.016627 J (16.627 mJ)
      Average power: 6.517 W
      Total duration: 3.331 s

======================================================================
TWO-PHASE ENERGY ANALYSIS RESULTS
======================================================================

=== Overall Energy Statistics ===
Total samples analyzed: 10000
Total energy consumed: 165.359500 J (165359.500 mJ)
Average energy per sample: 0.016536 J (16.536 mJ)

=== Energy Breakdown by Exit Layer ===
Layer | Samples | Accuracy | Per-Sample (mJ) | Total (mJ) | Avg Power (W) | CPU+GPU (W) | SOC (W) | Cum Acc | Cum Energy (mJ) | Cum Time (ms)
---------------------------------------------------------------------------------------------------------------------------------------
    1 |    6516 |   0.9954 |        16.382 | 106746.500 |        6.469 |      1.591 |   2.395 |  0.9954 |        16.382 |       0.643
    2 |     544 |   0.9761 |        17.887 |  9730.500 |        6.489 |      1.591 |   2.401 |  0.9939 |        16.498 |       0.662
    3 |    2940 |   0.8078 |        16.627 | 48882.500 |        6.517 |      1.605 |   2.416 |  0.9392 |        16.536 |       0.800
  Energy analysis complete for multiplier 0.1
  Calculating accuracy for multiplier 0.1...
       0.1 |       0.990000 |       0.990000 |       0.990000 |     16.536 |    0.939

--- Processing multiplier 0.5 ---
  Running two-phase energy analysis for multiplier 0.5...

======================================================================
TWO-PHASE ENERGY ANALYSIS WITH EXIT PATTERN DETECTION
======================================================================

=== Phase 1: Detecting Sample Exit Patterns (Fast) ===
Analyzing exit patterns for 10000 samples...
  Processing sample 0/10000 (0.0%)
  Processing sample 500/10000 (5.0%)
  Processing sample 1000/10000 (10.0%)
  Processing sample 1500/10000 (15.0%)
  Processing sample 2000/10000 (20.0%)
  Processing sample 2500/10000 (25.0%)
  Processing sample 3000/10000 (30.0%)
  Processing sample 3500/10000 (35.0%)
  Processing sample 4000/10000 (40.0%)
  Processing sample 4500/10000 (45.0%)
  Processing sample 5000/10000 (50.0%)
  Processing sample 5500/10000 (55.0%)
  Processing sample 6000/10000 (60.0%)
  Processing sample 6500/10000 (65.0%)
  Processing sample 7000/10000 (70.0%)
  Processing sample 7500/10000 (75.0%)
  Processing sample 8000/10000 (80.0%)
  Processing sample 8500/10000 (85.0%)
  Processing sample 9000/10000 (90.0%)
  Processing sample 9500/10000 (95.0%)

=== Exit Pattern Detection Results ===
  Layer 1: 6696 samples (67.0%)
  Layer 2: 505 samples (5.1%)
  Layer 3: 2799 samples (28.0%)

=== Accuracy by Exit Layer ===
  Layer 1: 0.9951 (6663/6696)
  Layer 2: 0.9723 (491/505)
  Layer 3: 0.7996 (2238/2799)

=== Phase 2: Batch Energy Measurement by Exit Layer ===

--- Measuring Layer 1 Energy (batch of 6696 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 29: samples 2800-2899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 30: samples 2900-2999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 31: samples 3000-3099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 32: samples 3100-3199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 33: samples 3200-3299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 34: samples 3300-3399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 35: samples 3400-3499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 36: samples 3500-3599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 37: samples 3600-3699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 38: samples 3700-3799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 39: samples 3800-3899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 40: samples 3900-3999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 41: samples 4000-4099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 42: samples 4100-4199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 43: samples 4200-4299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 44: samples 4300-4399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 45: samples 4400-4499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 46: samples 4500-4599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 47: samples 4600-4699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 48: samples 4700-4799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 49: samples 4800-4899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 50: samples 4900-4999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 51: samples 5000-5099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 52: samples 5100-5199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 53: samples 5200-5299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 54: samples 5300-5399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 55: samples 5400-5499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 56: samples 5500-5599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 57: samples 5600-5699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 58: samples 5700-5799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 59: samples 5800-5899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 60: samples 5900-5999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 61: samples 6000-6099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 62: samples 6100-6199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 63: samples 6200-6299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 64: samples 6300-6399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 65: samples 6400-6499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 66: samples 6500-6599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 67: samples 6600-6695
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Results for Layer 1:
      Total samples: 6696
      Total energy: 109.729750 J (109729.750 mJ)
      Per-sample energy: 0.016387 J (16.387 mJ)
      Average power: 6.551 W
      Total duration: 4.369 s

--- Measuring Layer 2 Energy (batch of 505 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-504
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Results for Layer 2:
      Total samples: 505
      Total energy: 9.850000 J (9850.000 mJ)
      Per-sample energy: 0.019505 J (19.505 mJ)
      Average power: 6.570 W
      Total duration: 0.456 s

--- Measuring Layer 3 Energy (batch of 2799 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2798
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Results for Layer 3:
      Total samples: 2799
      Total energy: 45.907000 J (45907.000 mJ)
      Per-sample energy: 0.016401 J (16.401 mJ)
      Average power: 6.558 W
      Total duration: 3.244 s

======================================================================
TWO-PHASE ENERGY ANALYSIS RESULTS
======================================================================

=== Overall Energy Statistics ===
Total samples analyzed: 10000
Total energy consumed: 165.486750 J (165486.750 mJ)
Average energy per sample: 0.016549 J (16.549 mJ)

=== Energy Breakdown by Exit Layer ===
Layer | Samples | Accuracy | Per-Sample (mJ) | Total (mJ) | Avg Power (W) | CPU+GPU (W) | SOC (W) | Cum Acc | Cum Energy (mJ) | Cum Time (ms)
---------------------------------------------------------------------------------------------------------------------------------------
    1 |    6696 |   0.9951 |        16.387 | 109729.750 |        6.551 |      1.624 |   2.415 |  0.9951 |        16.387 |       0.652
    2 |     505 |   0.9723 |        19.505 |  9850.000 |        6.570 |      1.632 |   2.416 |  0.9935 |        16.606 |       0.670
    3 |    2799 |   0.7996 |        16.401 | 45907.000 |        6.558 |      1.624 |   2.416 |  0.9392 |        16.549 |       0.807
  Energy analysis complete for multiplier 0.5
  Calculating accuracy for multiplier 0.5...
       0.5 |       0.988070 |       0.988099 |       0.984417 |     16.549 |    0.939

--- Processing multiplier 1.0 ---
  Running two-phase energy analysis for multiplier 1.0...

======================================================================
TWO-PHASE ENERGY ANALYSIS WITH EXIT PATTERN DETECTION
======================================================================

=== Phase 1: Detecting Sample Exit Patterns (Fast) ===
Analyzing exit patterns for 10000 samples...
  Processing sample 0/10000 (0.0%)
  Processing sample 500/10000 (5.0%)
  Processing sample 1000/10000 (10.0%)
  Processing sample 1500/10000 (15.0%)
  Processing sample 2000/10000 (20.0%)
  Processing sample 2500/10000 (25.0%)
  Processing sample 3000/10000 (30.0%)
  Processing sample 3500/10000 (35.0%)
  Processing sample 4000/10000 (40.0%)
  Processing sample 4500/10000 (45.0%)
  Processing sample 5000/10000 (50.0%)
  Processing sample 5500/10000 (55.0%)
  Processing sample 6000/10000 (60.0%)
  Processing sample 6500/10000 (65.0%)
  Processing sample 7000/10000 (70.0%)
  Processing sample 7500/10000 (75.0%)
  Processing sample 8000/10000 (80.0%)
  Processing sample 8500/10000 (85.0%)
  Processing sample 9000/10000 (90.0%)
  Processing sample 9500/10000 (95.0%)

=== Exit Pattern Detection Results ===
  Layer 1: 7325 samples (73.2%)
  Layer 2: 432 samples (4.3%)
  Layer 3: 2243 samples (22.4%)

=== Accuracy by Exit Layer ===
  Layer 1: 0.9934 (7277/7325)
  Layer 2: 0.9606 (415/432)
  Layer 3: 0.7606 (1706/2243)

=== Phase 2: Batch Energy Measurement by Exit Layer ===

--- Measuring Layer 1 Energy (batch of 7325 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 29: samples 2800-2899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 30: samples 2900-2999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 31: samples 3000-3099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 32: samples 3100-3199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 33: samples 3200-3299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 34: samples 3300-3399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 35: samples 3400-3499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 36: samples 3500-3599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 37: samples 3600-3699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 38: samples 3700-3799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 39: samples 3800-3899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 40: samples 3900-3999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 41: samples 4000-4099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 42: samples 4100-4199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 43: samples 4200-4299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 44: samples 4300-4399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 45: samples 4400-4499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 46: samples 4500-4599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 47: samples 4600-4699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 48: samples 4700-4799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 49: samples 4800-4899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 50: samples 4900-4999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 51: samples 5000-5099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 52: samples 5100-5199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 53: samples 5200-5299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 54: samples 5300-5399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 55: samples 5400-5499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 56: samples 5500-5599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 57: samples 5600-5699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 58: samples 5700-5799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 59: samples 5800-5899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 60: samples 5900-5999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 61: samples 6000-6099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 62: samples 6100-6199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 63: samples 6200-6299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 64: samples 6300-6399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 65: samples 6400-6499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 66: samples 6500-6599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 67: samples 6600-6699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 68: samples 6700-6799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 69: samples 6800-6899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 70: samples 6900-6999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 71: samples 7000-7099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 72: samples 7100-7199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 73: samples 7200-7299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 74: samples 7300-7324
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Results for Layer 1:
      Total samples: 7325
      Total energy: 121.667000 J (121667.000 mJ)
      Per-sample energy: 0.016610 J (16.610 mJ)
      Average power: 6.576 W
      Total duration: 5.090 s

--- Measuring Layer 2 Energy (batch of 432 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-431
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Results for Layer 2:
      Total samples: 432
      Total energy: 8.222750 J (8222.750 mJ)
      Per-sample energy: 0.019034 J (19.034 mJ)
      Average power: 6.583 W
      Total duration: 0.407 s

--- Measuring Layer 3 Energy (batch of 2243 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2242
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Results for Layer 3:
      Total samples: 2243
      Total energy: 37.891000 J (37891.000 mJ)
      Per-sample energy: 0.016893 J (16.893 mJ)
      Average power: 6.589 W
      Total duration: 2.753 s

======================================================================
TWO-PHASE ENERGY ANALYSIS RESULTS
======================================================================

=== Overall Energy Statistics ===
Total samples analyzed: 10000
Total energy consumed: 167.780750 J (167780.750 mJ)
Average energy per sample: 0.016778 J (16.778 mJ)

=== Energy Breakdown by Exit Layer ===
Layer | Samples | Accuracy | Per-Sample (mJ) | Total (mJ) | Avg Power (W) | CPU+GPU (W) | SOC (W) | Cum Acc | Cum Energy (mJ) | Cum Time (ms)
---------------------------------------------------------------------------------------------------------------------------------------
    1 |    7325 |   0.9934 |        16.610 | 121667.000 |        6.576 |      1.626 |   2.417 |  0.9934 |        16.610 |       0.695
    2 |     432 |   0.9606 |        19.034 |  8222.750 |        6.583 |      1.633 |   2.416 |  0.9916 |        16.745 |       0.709
    3 |    2243 |   0.7606 |        16.893 | 37891.000 |        6.589 |      1.626 |   2.416 |  0.9398 |        16.778 |       0.825
  Energy analysis complete for multiplier 1.0
  Calculating accuracy for multiplier 1.0...
       1.0 |       0.977444 |       0.976817 |       0.968845 |     16.778 |    0.940

--- Processing multiplier 1.5 ---
  Running two-phase energy analysis for multiplier 1.5...

======================================================================
TWO-PHASE ENERGY ANALYSIS WITH EXIT PATTERN DETECTION
======================================================================

=== Phase 1: Detecting Sample Exit Patterns (Fast) ===
Analyzing exit patterns for 10000 samples...
  Processing sample 0/10000 (0.0%)
  Processing sample 500/10000 (5.0%)
  Processing sample 1000/10000 (10.0%)
  Processing sample 1500/10000 (15.0%)
  Processing sample 2000/10000 (20.0%)
  Processing sample 2500/10000 (25.0%)
  Processing sample 3000/10000 (30.0%)
  Processing sample 3500/10000 (35.0%)
  Processing sample 4000/10000 (40.0%)
  Processing sample 4500/10000 (45.0%)
  Processing sample 5000/10000 (50.0%)
  Processing sample 5500/10000 (55.0%)
  Processing sample 6000/10000 (60.0%)
  Processing sample 6500/10000 (65.0%)
  Processing sample 7000/10000 (70.0%)
  Processing sample 7500/10000 (75.0%)
  Processing sample 8000/10000 (80.0%)
  Processing sample 8500/10000 (85.0%)
  Processing sample 9000/10000 (90.0%)
  Processing sample 9500/10000 (95.0%)

=== Exit Pattern Detection Results ===
  Layer 1: 7667 samples (76.7%)
  Layer 2: 417 samples (4.2%)
  Layer 3: 1916 samples (19.2%)

=== Accuracy by Exit Layer ===
  Layer 1: 0.9922 (7607/7667)
  Layer 2: 0.9472 (395/417)
  Layer 3: 0.7291 (1397/1916)

=== Phase 2: Batch Energy Measurement by Exit Layer ===

--- Measuring Layer 1 Energy (batch of 7667 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 29: samples 2800-2899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 30: samples 2900-2999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 31: samples 3000-3099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 32: samples 3100-3199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 33: samples 3200-3299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 34: samples 3300-3399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 35: samples 3400-3499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 36: samples 3500-3599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 37: samples 3600-3699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 38: samples 3700-3799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 39: samples 3800-3899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 40: samples 3900-3999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 41: samples 4000-4099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 42: samples 4100-4199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 43: samples 4200-4299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 44: samples 4300-4399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 45: samples 4400-4499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 46: samples 4500-4599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 47: samples 4600-4699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 48: samples 4700-4799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 49: samples 4800-4899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 50: samples 4900-4999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 51: samples 5000-5099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 52: samples 5100-5199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 53: samples 5200-5299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 54: samples 5300-5399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 55: samples 5400-5499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 56: samples 5500-5599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 57: samples 5600-5699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 58: samples 5700-5799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 59: samples 5800-5899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 60: samples 5900-5999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 61: samples 6000-6099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 62: samples 6100-6199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 63: samples 6200-6299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 64: samples 6300-6399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 65: samples 6400-6499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 66: samples 6500-6599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 67: samples 6600-6699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 68: samples 6700-6799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 69: samples 6800-6899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 70: samples 6900-6999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 71: samples 7000-7099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 72: samples 7100-7199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 73: samples 7200-7299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 74: samples 7300-7399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 75: samples 7400-7499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 76: samples 7500-7599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 77: samples 7600-7666
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Results for Layer 1:
      Total samples: 7667
      Total energy: 125.565000 J (125565.000 mJ)
      Per-sample energy: 0.016377 J (16.377 mJ)
      Average power: 6.522 W
      Total duration: 6.314 s

--- Measuring Layer 2 Energy (batch of 417 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-416
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Results for Layer 2:
      Total samples: 417
      Total energy: 8.302250 J (8302.250 mJ)
      Per-sample energy: 0.019909 J (19.909 mJ)
      Average power: 6.645 W
      Total duration: 0.389 s

--- Measuring Layer 3 Energy (batch of 1916 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1915
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Results for Layer 3:
      Total samples: 1916
      Total energy: 33.259250 J (33259.250 mJ)
      Per-sample energy: 0.017359 J (17.359 mJ)
      Average power: 6.653 W
      Total duration: 2.860 s

======================================================================
TWO-PHASE ENERGY ANALYSIS RESULTS
======================================================================

=== Overall Energy Statistics ===
Total samples analyzed: 10000
Total energy consumed: 167.126500 J (167126.500 mJ)
Average energy per sample: 0.016713 J (16.713 mJ)

=== Energy Breakdown by Exit Layer ===
Layer | Samples | Accuracy | Per-Sample (mJ) | Total (mJ) | Avg Power (W) | CPU+GPU (W) | SOC (W) | Cum Acc | Cum Energy (mJ) | Cum Time (ms)
---------------------------------------------------------------------------------------------------------------------------------------
    1 |    7667 |   0.9922 |        16.377 | 125565.000 |        6.522 |      1.607 |   2.388 |  0.9922 |        16.377 |       0.824
    2 |     417 |   0.9472 |        19.909 |  8302.250 |        6.645 |      1.643 |   2.435 |  0.9899 |        16.560 |       0.829
    3 |    1916 |   0.7291 |        17.359 | 33259.250 |        6.653 |      1.651 |   2.435 |  0.9399 |        16.713 |       0.956
  Energy analysis complete for multiplier 1.5
  Calculating accuracy for multiplier 1.5...
       1.5 |       0.966818 |       0.965536 |       0.953273 |     16.713 |    0.940

--- Processing multiplier 2.0 ---
  Running two-phase energy analysis for multiplier 2.0...

======================================================================
TWO-PHASE ENERGY ANALYSIS WITH EXIT PATTERN DETECTION
======================================================================

=== Phase 1: Detecting Sample Exit Patterns (Fast) ===
Analyzing exit patterns for 10000 samples...
  Processing sample 0/10000 (0.0%)
  Processing sample 500/10000 (5.0%)
  Processing sample 1000/10000 (10.0%)
  Processing sample 1500/10000 (15.0%)
  Processing sample 2000/10000 (20.0%)
  Processing sample 2500/10000 (25.0%)
  Processing sample 3000/10000 (30.0%)
  Processing sample 3500/10000 (35.0%)
  Processing sample 4000/10000 (40.0%)
  Processing sample 4500/10000 (45.0%)
  Processing sample 5000/10000 (50.0%)
  Processing sample 5500/10000 (55.0%)
  Processing sample 6000/10000 (60.0%)
  Processing sample 6500/10000 (65.0%)
  Processing sample 7000/10000 (70.0%)
  Processing sample 7500/10000 (75.0%)
  Processing sample 8000/10000 (80.0%)
  Processing sample 8500/10000 (85.0%)
  Processing sample 9000/10000 (90.0%)
  Processing sample 9500/10000 (95.0%)

=== Exit Pattern Detection Results ===
  Layer 1: 7921 samples (79.2%)
  Layer 2: 372 samples (3.7%)
  Layer 3: 1707 samples (17.1%)

=== Accuracy by Exit Layer ===
  Layer 1: 0.9914 (7853/7921)
  Layer 2: 0.9355 (348/372)
  Layer 3: 0.7024 (1199/1707)

=== Phase 2: Batch Energy Measurement by Exit Layer ===

--- Measuring Layer 1 Energy (batch of 7921 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 29: samples 2800-2899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 30: samples 2900-2999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 31: samples 3000-3099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 32: samples 3100-3199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 33: samples 3200-3299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 34: samples 3300-3399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 35: samples 3400-3499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 36: samples 3500-3599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 37: samples 3600-3699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 38: samples 3700-3799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 39: samples 3800-3899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 40: samples 3900-3999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 41: samples 4000-4099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 42: samples 4100-4199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 43: samples 4200-4299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 44: samples 4300-4399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 45: samples 4400-4499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 46: samples 4500-4599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 47: samples 4600-4699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 48: samples 4700-4799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 49: samples 4800-4899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 50: samples 4900-4999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 51: samples 5000-5099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 52: samples 5100-5199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 53: samples 5200-5299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 54: samples 5300-5399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 55: samples 5400-5499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 56: samples 5500-5599
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 57: samples 5600-5699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 58: samples 5700-5799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 59: samples 5800-5899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 60: samples 5900-5999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 61: samples 6000-6099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 62: samples 6100-6199
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 63: samples 6200-6299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 64: samples 6300-6399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 65: samples 6400-6499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 66: samples 6500-6599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 67: samples 6600-6699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 68: samples 6700-6799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 69: samples 6800-6899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 70: samples 6900-6999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 71: samples 7000-7099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 72: samples 7100-7199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 73: samples 7200-7299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 74: samples 7300-7399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 75: samples 7400-7499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 76: samples 7500-7599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 77: samples 7600-7699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 78: samples 7700-7799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 79: samples 7800-7899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 80: samples 7900-7920
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Results for Layer 1:
      Total samples: 7921
      Total energy: 130.497250 J (130497.250 mJ)
      Per-sample energy: 0.016475 J (16.475 mJ)
      Average power: 6.523 W
      Total duration: 8.403 s

--- Measuring Layer 2 Energy (batch of 372 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-371
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Results for Layer 2:
      Total samples: 372
      Total energy: 6.725500 J (6725.500 mJ)
      Per-sample energy: 0.018079 J (18.079 mJ)
      Average power: 6.730 W
      Total duration: 0.495 s

--- Measuring Layer 3 Energy (batch of 1707 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 3...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1706
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Results for Layer 3:
      Total samples: 1707
      Total energy: 28.736000 J (28736.000 mJ)
      Per-sample energy: 0.016834 J (16.834 mJ)
      Average power: 6.364 W
      Total duration: 2.759 s

======================================================================
TWO-PHASE ENERGY ANALYSIS RESULTS
======================================================================

=== Overall Energy Statistics ===
Total samples analyzed: 10000
Total energy consumed: 165.958750 J (165958.750 mJ)
Average energy per sample: 0.016596 J (16.596 mJ)

=== Energy Breakdown by Exit Layer ===
Layer | Samples | Accuracy | Per-Sample (mJ) | Total (mJ) | Avg Power (W) | CPU+GPU (W) | SOC (W) | Cum Acc | Cum Energy (mJ) | Cum Time (ms)
---------------------------------------------------------------------------------------------------------------------------------------
    1 |    7921 |   0.9914 |        16.475 | 130497.250 |        6.523 |      1.630 |   2.389 |  0.9914 |        16.475 |       1.061
    2 |     372 |   0.9355 |        18.079 |  6725.500 |        6.730 |      1.688 |   2.456 |  0.9889 |        16.547 |       1.073
    3 |    1707 |   0.7024 |        16.834 | 28736.000 |        6.364 |      1.608 |   2.310 |  0.9400 |        16.596 |       1.166
  Energy analysis complete for multiplier 2.0
  Calculating accuracy for multiplier 2.0...
       2.0 |       0.956192 |       0.954255 |       0.937702 |     16.596 |    0.940

--- Processing multiplier 3.0 ---
  Running two-phase energy analysis for multiplier 3.0...

======================================================================
TWO-PHASE ENERGY ANALYSIS WITH EXIT PATTERN DETECTION
======================================================================

=== Phase 1: Detecting Sample Exit Patterns (Fast) ===
Analyzing exit patterns for 10000 samples...
  Processing sample 0/10000 (0.0%)
  Processing sample 500/10000 (5.0%)
  Processing sample 1000/10000 (10.0%)
  Processing sample 1500/10000 (15.0%)
  Processing sample 2000/10000 (20.0%)
  Processing sample 2500/10000 (25.0%)
  Processing sample 3000/10000 (30.0%)
  Processing sample 3500/10000 (35.0%)
  Processing sample 4000/10000 (40.0%)
  Processing sample 4500/10000 (45.0%)
  Processing sample 5000/10000 (50.0%)
  Processing sample 5500/10000 (55.0%)
  Processing sample 6000/10000 (60.0%)
  Processing sample 6500/10000 (65.0%)
  Processing sample 7000/10000 (70.0%)
  Processing sample 7500/10000 (75.0%)
  Processing sample 8000/10000 (80.0%)
  Processing sample 8500/10000 (85.0%)
  Processing sample 9000/10000 (90.0%)
  Processing sample 9500/10000 (95.0%)

=== Exit Pattern Detection Results ===
  Layer 1: 8245 samples (82.5%)
  Layer 2: 345 samples (3.5%)
  Layer 3: 1410 samples (14.1%)

=== Accuracy by Exit Layer ===
  Layer 1: 0.9896 (8159/8245)
  Layer 2: 0.9014 (311/345)
  Layer 3: 0.6624 (934/1410)

=== Phase 2: Batch Energy Measurement by Exit Layer ===

--- Measuring Layer 1 Energy (batch of 8245 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 16: samples 1500-1599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 17: samples 1600-1699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 18: samples 1700-1799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 19: samples 1800-1899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 20: samples 1900-1999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 21: samples 2000-2099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 22: samples 2100-2199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 23: samples 2200-2299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 24: samples 2300-2399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 25: samples 2400-2499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 26: samples 2500-2599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 27: samples 2600-2699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 28: samples 2700-2799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 29: samples 2800-2899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 30: samples 2900-2999
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 31: samples 3000-3099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 32: samples 3100-3199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 33: samples 3200-3299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 34: samples 3300-3399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 35: samples 3400-3499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 36: samples 3500-3599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 37: samples 3600-3699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 38: samples 3700-3799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 39: samples 3800-3899
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 40: samples 3900-3999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 41: samples 4000-4099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 42: samples 4100-4199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 43: samples 4200-4299
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 44: samples 4300-4399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 45: samples 4400-4499
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 46: samples 4500-4599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 47: samples 4600-4699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 48: samples 4700-4799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 49: samples 4800-4899
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 50: samples 4900-4999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 51: samples 5000-5099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 52: samples 5100-5199
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 53: samples 5200-5299
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 54: samples 5300-5399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 55: samples 5400-5499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 56: samples 5500-5599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 57: samples 5600-5699
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 58: samples 5700-5799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 59: samples 5800-5899
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 60: samples 5900-5999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 61: samples 6000-6099
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 62: samples 6100-6199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 63: samples 6200-6299
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 64: samples 6300-6399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 65: samples 6400-6499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 66: samples 6500-6599
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 67: samples 6600-6699
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 68: samples 6700-6799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 69: samples 6800-6899
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 70: samples 6900-6999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 71: samples 7000-7099
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 72: samples 7100-7199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 73: samples 7200-7299
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 74: samples 7300-7399
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 75: samples 7400-7499
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 76: samples 7500-7599
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 77: samples 7600-7699
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 78: samples 7700-7799
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 79: samples 7800-7899
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 80: samples 7900-7999
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 81: samples 8000-8099
      Starting power monitoring for layer 1...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 82: samples 8100-8199
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Processing sub-batch 83: samples 8200-8244
      Starting power monitoring for layer 1...
      Power monitoring started successfully
      Stopping power monitoring for layer 1...
      Power monitoring stopped successfully
    Results for Layer 1:
      Total samples: 8245
      Total energy: 109.755500 J (109755.500 mJ)
      Per-sample energy: 0.013312 J (13.312 mJ)
      Average power: 5.279 W
      Total duration: 19.078 s

--- Measuring Layer 2 Energy (batch of 345 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 2...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-344
      Starting power monitoring for layer 2...
      Power monitoring started successfully
      Stopping power monitoring for layer 2...
      Power monitoring stopped successfully
    Results for Layer 2:
      Total samples: 345
      Total energy: 5.078750 J (5078.750 mJ)
      Per-sample energy: 0.014721 J (14.721 mJ)
      Average power: 4.769 W
      Total duration: 0.445 s

--- Measuring Layer 3 Energy (batch of 1410 samples) ---
    Processing sub-batch 1: samples 0-99
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 2: samples 100-199
      Starting power monitoring for layer 3...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 3: samples 200-299
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 4: samples 300-399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 5: samples 400-499
      Starting power monitoring for layer 3...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 6: samples 500-599
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 7: samples 600-699
      Starting power monitoring for layer 3...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 8: samples 700-799
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 9: samples 800-899
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 10: samples 900-999
      Starting power monitoring for layer 3...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 11: samples 1000-1099
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 12: samples 1100-1199
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 13: samples 1200-1299
      Starting power monitoring for layer 3...
Warning: Power monitoring thread for client 0 didn't start within timeout
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 14: samples 1300-1399
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Processing sub-batch 15: samples 1400-1409
      Starting power monitoring for layer 3...
      Power monitoring started successfully
      Stopping power monitoring for layer 3...
      Power monitoring stopped successfully
    Results for Layer 3:
      Total samples: 1410
      Total energy: 16.932000 J (16932.000 mJ)
      Per-sample energy: 0.012009 J (12.009 mJ)
      Average power: 4.370 W
      Total duration: 5.022 s

======================================================================
TWO-PHASE ENERGY ANALYSIS RESULTS
======================================================================

=== Overall Energy Statistics ===
Total samples analyzed: 10000
Total energy consumed: 131.766250 J (131766.250 mJ)
Average energy per sample: 0.013177 J (13.177 mJ)

=== Energy Breakdown by Exit Layer ===
Layer | Samples | Accuracy | Per-Sample (mJ) | Total (mJ) | Avg Power (W) | CPU+GPU (W) | SOC (W) | Cum Acc | Cum Energy (mJ) | Cum Time (ms)
---------------------------------------------------------------------------------------------------------------------------------------
    1 |    8245 |   0.9896 |        13.312 | 109755.500 |        5.279 |      1.337 |   1.919 |  0.9896 |        13.312 |       2.314
    2 |     345 |   0.9014 |        14.721 |  5078.750 |        4.769 |      1.195 |   1.749 |  0.9860 |        13.368 |       2.273
    3 |    1410 |   0.6624 |        12.009 | 16932.000 |        4.370 |      1.113 |   1.588 |  0.9404 |        13.177 |       2.454
  Energy analysis complete for multiplier 3.0
  Calculating accuracy for multiplier 3.0...
       3.0 |       0.934940 |       0.931692 |       0.906558 |     13.177 |    0.940
--- Creating Energy Visualization ---

--- Creating Energy Visualization ---
Baseline data - Exit distribution: {1: 0, 2: 0, 3: 10000}
Threshold comparison - Number of points: 6
Trade-off data - Multipliers: [0.1, 0.5, 1.0, 1.5, 2.0, 3.0]
Trade-off data - Energies (mJ): ['16.536', '16.549', '16.778', '16.713', '16.596', '13.177']
Trade-off data - Accuracies: ['0.939', '0.939', '0.940', '0.940', '0.940', '0.940']
Energy analysis visualization saved to: /home/jetson/Documents/github/EdgeFF/output/energy_analysis_20251013_135727.png
Energy analysis completed! Check 'output/energy_analysis.png' for detailed results.

=== Analysis Results Summary ===
Energy range: 13.177 - 16.778 mJ
Accuracy range: 0.939 - 0.940
Unique energy values: 6
‚úÖ SUCCESS: Fixed confidence mechanism - now showing 6 different energy levels!
Energy savings potential: 21.5%

=== Energy Analysis Summary ===
Baseline Analysis (Confidence Multiplier = 1.0):
  Total samples analyzed: 10000
  Average energy per sample: 16.018 mJ (0.016018 J)
  Energy standard deviation: 0.000 mJ (0.000000 J)
  Total inference energy: 160183.750 mJ (160.183750 J)

Baseline Early Exit Distribution:
  Layer 1: 0 samples (0.0%)
  Layer 2: 0 samples (0.0%)
  Layer 3: 10000 samples (100.0%)
  Average layers used: 3.00
  Early exit rate: 0.0%

Threshold Comparison Results:
  Tested 6 different confidence multipliers
  Multiplier values: [0.1, 0.5, 1.0, 1.5, 2.0, 3.0]
  Energy range: 13.177 - 16.778 mJ
  Accuracy range: 0.939 - 0.940
